{
  "apiName": "GoalNet Backend API",
  "version": "1.0.0",
  "baseUrl": {
    "development": "http://localhost:3000",
    "production": "TBD"
  },
  "authentication": {
    "type": "JWT Bearer Token",
    "tokenExpiry": "30 days",
    "header": "Authorization: Bearer {token}"
  },
  "endpoints": [
    {
      "id": "health-check",
      "name": "Health Check",
      "method": "GET",
      "path": "/health",
      "protected": false,
      "description": "Check if backend server is running",
      "request": {
        "headers": {},
        "body": null
      },
      "response": {
        "200": {
          "status": "ok"
        }
      }
    },
    {
      "id": "request-otp",
      "name": "Request OTP",
      "method": "POST",
      "path": "/auth/request-otp",
      "protected": false,
      "description": "Send OTP to user's email for authentication",
      "rateLimit": "3 requests per 5 minutes per email",
      "request": {
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "email": {
            "type": "string",
            "required": true,
            "format": "email",
            "example": "user@example.com"
          }
        }
      },
      "response": {
        "200": {
          "success": true
        },
        "400": {
          "error": "Bad Request",
          "message": "Invalid email format"
        },
        "429": {
          "error": "Too Many Requests",
          "message": "Too many OTP requests. Please try again later."
        }
      },
      "notes": [
        "OTP is valid for 10 minutes",
        "OTP is 6 digits numeric",
        "Check backend console for OTP if email not configured"
      ]
    },
    {
      "id": "verify-otp",
      "name": "Verify OTP",
      "method": "POST",
      "path": "/auth/verify-otp",
      "protected": false,
      "description": "Verify OTP and get JWT token. Creates new user if email doesn't exist.",
      "request": {
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "email": {
            "type": "string",
            "required": true,
            "format": "email",
            "example": "user@example.com"
          },
          "otp": {
            "type": "string",
            "required": true,
            "length": 6,
            "example": "123456"
          }
        }
      },
      "response": {
        "200": {
          "token": {
            "type": "string",
            "description": "JWT token valid for 30 days",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "isNewUser": {
            "type": "boolean",
            "description": "true if account was just created, false if existing user"
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "User ID (MongoDB ObjectId)"
              },
              "email": {
                "type": "string"
              },
              "name": {
                "type": "string",
                "description": "Full name (empty string for new users)"
              },
              "role": {
                "type": "string | null",
                "enum": [
                  "founder",
                  "investor",
                  "mentor",
                  "cxo",
                  "service",
                  "other",
                  null
                ]
              },
              "primaryGoal": {
                "type": "string | null",
                "enum": [
                  "fundraising",
                  "clients",
                  "cofounder",
                  "hiring",
                  "learn",
                  "other",
                  null
                ]
              },
              "company": {
                "type": "string | null"
              },
              "website": {
                "type": "string | null"
              },
              "location": {
                "type": "string | null"
              },
              "oneLiner": {
                "type": "string | null"
              }
            }
          }
        },
        "400": {
          "error": "Bad Request",
          "message": "Invalid or expired code"
        }
      },
      "notes": [
        "OTP can only be used once",
        "OTP expires after 10 minutes",
        "If isNewUser is true, show profile completion screen",
        "Store JWT token securely in keychain/secure storage"
      ]
    },
    {
      "id": "get-profile",
      "name": "Get Current User Profile",
      "method": "GET",
      "path": "/me",
      "protected": true,
      "description": "Get authenticated user's profile information",
      "request": {
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "body": null
      },
      "response": {
        "200": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "role": {
            "type": "string | null",
            "enum": [
              "founder",
              "investor",
              "mentor",
              "cxo",
              "service",
              "other",
              null
            ]
          },
          "primaryGoal": {
            "type": "string | null",
            "enum": [
              "fundraising",
              "clients",
              "cofounder",
              "hiring",
              "learn",
              "other",
              null
            ]
          },
          "company": {
            "type": "string | null"
          },
          "website": {
            "type": "string | null"
          },
          "location": {
            "type": "string | null"
          },
          "oneLiner": {
            "type": "string | null"
          },
          "createdAt": {
            "type": "string",
            "format": "ISO 8601",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "ISO 8601",
            "example": "2024-01-20T14:45:00.000Z"
          }
        },
        "401": {
          "error": "Unauthorized",
          "message": "Invalid or expired token"
        },
        "404": {
          "error": "Not Found",
          "message": "User not found"
        }
      }
    },
    {
      "id": "update-profile",
      "name": "Update User Profile",
      "method": "PUT",
      "path": "/me",
      "protected": true,
      "description": "Update authenticated user's profile. All fields are optional.",
      "request": {
        "headers": {
          "Authorization": "Bearer {token}",
          "Content-Type": "application/json"
        },
        "body": {
          "name": {
            "type": "string",
            "required": false,
            "example": "John Doe"
          },
          "role": {
            "type": "string",
            "required": false,
            "enum": [
              "founder",
              "investor",
              "mentor",
              "cxo",
              "service",
              "other"
            ],
            "example": "founder"
          },
          "primaryGoal": {
            "type": "string",
            "required": false,
            "enum": [
              "fundraising",
              "clients",
              "cofounder",
              "hiring",
              "learn",
              "other"
            ],
            "example": "fundraising"
          },
          "company": {
            "type": "string",
            "required": false,
            "example": "My Startup"
          },
          "website": {
            "type": "string",
            "required": false,
            "format": "url",
            "example": "https://mystartup.com"
          },
          "location": {
            "type": "string",
            "required": false,
            "example": "Chennai, India"
          },
          "oneLiner": {
            "type": "string",
            "required": false,
            "example": "Building AI SaaS for manufacturing"
          }
        }
      },
      "response": {
        "200": {
          "description": "Returns updated user object (same structure as GET /me)"
        },
        "400": {
          "error": "Bad Request",
          "message": "Invalid role or primaryGoal value"
        },
        "401": {
          "error": "Unauthorized",
          "message": "Invalid or expired token"
        }
      },
      "notes": [
        "Send only fields you want to update",
        "Invalid enum values will return 400 error",
        "Email cannot be changed"
      ]
    }
  ],
  "dataTypes": {
    "User": {
      "id": "string",
      "email": "string",
      "name": "string",
      "role": "Role | null",
      "primaryGoal": "PrimaryGoal | null",
      "company": "string | null",
      "website": "string | null",
      "location": "string | null",
      "oneLiner": "string | null",
      "createdAt": "ISO 8601 string",
      "updatedAt": "ISO 8601 string"
    },
    "Role": {
      "enum": ["founder", "investor", "mentor", "cxo", "service", "other"],
      "descriptions": {
        "founder": "Startup founder",
        "investor": "Angel investor, VC",
        "mentor": "Mentor, advisor",
        "cxo": "CXO, executive",
        "service": "Service provider",
        "other": "Other"
      }
    },
    "PrimaryGoal": {
      "enum": [
        "fundraising",
        "clients",
        "cofounder",
        "hiring",
        "learn",
        "other"
      ],
      "descriptions": {
        "fundraising": "Raising funds",
        "clients": "Finding clients",
        "cofounder": "Finding co-founder",
        "hiring": "Hiring team",
        "learn": "Learning/networking",
        "other": "Other goals"
      }
    }
  },
  "errorCodes": {
    "400": "Bad Request - Invalid input data",
    "401": "Unauthorized - Missing, invalid, or expired token",
    "404": "Not Found - Resource not found",
    "429": "Too Many Requests - Rate limit exceeded",
    "500": "Internal Server Error - Server error"
  },
  "errorResponseFormat": {
    "error": "string - Error type",
    "message": "string - Human-readable error message"
  },
  "mobileIntegrationFlow": [
    {
      "step": 1,
      "action": "User enters email",
      "api": "POST /auth/request-otp",
      "screen": "Login Screen"
    },
    {
      "step": 2,
      "action": "OTP sent to email (or logged to console)",
      "screen": "OTP Input Screen"
    },
    {
      "step": 3,
      "action": "User enters OTP",
      "api": "POST /auth/verify-otp",
      "screen": "OTP Input Screen"
    },
    {
      "step": 4,
      "action": "Store JWT token securely",
      "storage": "Keychain/Secure Storage (NOT SharedPreferences)"
    },
    {
      "step": 5,
      "condition": "If isNewUser === true",
      "action": "Show profile completion screen",
      "api": "PUT /me",
      "screen": "Profile Completion Screen"
    },
    {
      "step": 6,
      "condition": "If isNewUser === false",
      "action": "Navigate to main app",
      "screen": "Main App"
    },
    {
      "step": 7,
      "action": "All protected API calls use: Authorization: Bearer {token}",
      "note": "Add token to header for all /me endpoints"
    },
    {
      "step": 8,
      "condition": "If 401 Unauthorized",
      "action": "Clear token and redirect to login",
      "screen": "Login Screen"
    }
  ],
  "securityBestPractices": [
    "Store JWT token in platform secure storage (Keychain on iOS, Keystore on Android)",
    "Never store token in SharedPreferences or AsyncStorage",
    "Always use HTTPS in production",
    "Handle 401 errors gracefully (logout and re-authenticate)",
    "Validate email format on client before API call",
    "Implement OTP resend countdown timer (60 seconds)",
    "Show clear error messages for rate limiting (429)",
    "Implement retry logic for network errors",
    "Cache profile data locally for offline mode",
    "Clear sensitive data on logout"
  ],
  "testingInfo": {
    "developmentUrl": "http://localhost:3000",
    "testEmail": "test@example.com",
    "otpLocation": "Check backend console logs",
    "postmanCollection": "GoalNet-API.postman_collection.json",
    "restClientFile": "quick-test.http"
  }
}
