### GoalNet API Test - DevTunnel
### Base URL: https://cpt4x27j-3000.inc1.devtunnels.ms

@baseUrl = https://cpt4x27j-3000.inc1.devtunnels.ms
@email = test123@example.com
@otp = 123456

###############################################
# Step 1: Request OTP
###############################################

POST {{baseUrl}}/auth/request-otp
Content-Type: application/json

{
  "email": "{{email}}"
}

###############################################
# Step 2: Verify OTP
# Expected: isNewUser: true
###############################################

POST {{baseUrl}}/auth/verify-otp
Content-Type: application/json

{
  "email": "{{email}}",
  "otp": "{{otp}}"
}

###############################################
# Step 3: Complete Profile (First Time)
# Copy token from Step 2 response
###############################################

PUT {{baseUrl}}/me
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN_HERE

{
  "name": "Test User",
  "role": "founder",
  "primaryGoal": "fundraising"
}

###############################################
# Step 4: Enrich Profile (Optional)
###############################################

PUT {{baseUrl}}/me
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN_HERE

{
  "company": "Test Co",
  "location": "Chennai"
}

###############################################
# Step 5: Get Profile
###############################################

GET {{baseUrl}}/me
Authorization: Bearer YOUR_TOKEN_HERE

###############################################
# Complete Flow - Full Profile Update
###############################################

PUT {{baseUrl}}/me
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN_HERE

{
  "name": "Test User",
  "role": "founder",
  "primaryGoal": "fundraising",
  "company": "Test Co",
  "website": "https://testco.com",
  "location": "Chennai, India",
  "oneLiner": "Building the next big thing"
}

###############################################
# Health Check
###############################################

GET {{baseUrl}}/health

###############################################
# Test with Different User
###############################################

POST {{baseUrl}}/auth/request-otp
Content-Type: application/json

{
  "email": "newuser@example.com"
}

###

POST {{baseUrl}}/auth/verify-otp
Content-Type: application/json

{
  "email": "newuser@example.com",
  "otp": "123456"
}

###############################################
# NOTES
###############################################

# 1. Static OTP is always: 123456
# 2. After Step 2, copy the token from response
# 3. Replace YOUR_TOKEN_HERE with actual token
# 4. Token is valid for 30 days
# 5. isNewUser=true means profile completion needed
